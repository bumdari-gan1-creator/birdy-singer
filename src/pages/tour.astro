---
import BaseLayout from "../layouts/BaseLayout.astro";
const posts = await Astro.glob("./posts/*.md");
---

<BaseLayout title="Tour Blog">
  <main class="page blog-list">
    <h1 class="blog-title">Tour Blog</h1>

    <div class="posts-grid">
      {posts.map((post) => {
        const { title, description, image, pubDate, author } = post.frontmatter;

        return (
          <article class="post-card">
            {image && image.url && (
              <a href={post.url}>
                <img
                  src={image.url}
                  alt={image.alt || title}
                  class="post-thumb"
                />
              </a>
            )}

            <div class="post-content">
              <h2>
                <a href={post.url}>{title}</a>
              </h2>

              <p class="post-meta">
                {pubDate && <time datetime={pubDate}>{pubDate}</time>}
                {author && <> Â· {author}</>}
              </p>

              {description && (
                <p class="post-desc">
                  {description}
                </p>
              )}
            </div>
          </article>
        );
      })}
    </div>
  </main>
</BaseLayout>
