---
import BaseLayout from "./BaseLayout.astro";

const { frontmatter, url } = Astro.props;
const { title, location, author, description, image, pubDate, tags } = frontmatter;
---

<BaseLayout title={title}>
  <main class="post-page">
    <article class="post-article">
      <header class="post-header">
        <h1 class="post-title">{title}</h1>

        <div class="post-meta">
          {author && (
            <span class="post-meta-item">
              Published by <strong>{author}</strong>
            </span>
          )}

          {pubDate && (
            <span class="post-meta-item">
              <time datetime={pubDate}>{pubDate}</time>
            </span>
          )}

          {location && (
            <span class="post-meta-item">
              üìç {location}
            </span>
          )}
        </div>

        {description && (
          <p class="post-desc">
            {description}
          </p>
        )}
      </header>

      {image?.url && (
        <figure class="post-hero-wrapper">
          <img
            src={image.url}
            alt={image.alt || title}
            class="post-hero"
          />
          {image.alt && (
            <figcaption class="post-hero-caption">
              {image.alt}
            </figcaption>
          )}
        </figure>
      )}

      <section class="post-body">
        <slot />
      </section>

      {tags && tags.length > 0 && (
        <ul class="tag-list">
          {tags.map((tag) => (
            <li class="tag">{tag}</li>
          ))}
        </ul>
      )}
    </article>
  </main>
</BaseLayout>

<style>
  .post-page {
    max-width: 960px;
    margin: 2.5rem auto 3.5rem;
    padding: 0 1.5rem;
  }

  .post-article {
    background: #f7f7f7;
    border-radius: 1.25rem;
    padding: 2rem 2rem 2.5rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.04);
  }

  .post-header {
    margin-bottom: 1.75rem;
  }

  .post-title {
    font-size: 2.1rem;
    margin: 0 0 0.5rem;
  }

  .post-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    font-size: 0.9rem;
    color: #777;
    margin-bottom: 0.5rem;
  }

  .post-meta-item::before {
    content: "‚Ä¢ ";
  }

  .post-meta-item:first-child::before {
    content: "";
  }

  .post-desc {
    margin-top: 0.5rem;
    color: #555;
  }

  .post-hero-wrapper {
    margin: 1.25rem 0 2rem;
    text-align: center;
  }

  /* –≠–ù–î ”©”©—Ä—á–ª”©–ª—Ç –æ—Ä–∂ –±–∞–π–≥–∞–∞ —Ö—ç—Å—ç–≥ */
  .post-hero {
    max-width: 100%;
    height: auto;        /* aspect ratio-–≥ –Ω—å —Ö–∞–¥–≥–∞–ª–Ω–∞ */
    display: inline-block;
    border-radius: 0.9rem;
  }

  .post-hero-caption {
    font-size: 0.85rem;
    color: #777;
    margin-top: 0.4rem;
  }

  .post-body {
    line-height: 1.7;
  }

  .post-body p + p {
    margin-top: 0.75rem;
  }

  .tag-list {
    list-style: none;
    display: flex;
    gap: 0.5rem;
    margin-top: 2rem;
    padding: 0;
    flex-wrap: wrap;
  }

  .tag {
    font-size: 0.8rem;
    background: #e9e9e9;
    padding: 0.25rem 0.7rem;
    border-radius: 999px;
  }
</style>
